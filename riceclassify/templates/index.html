<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rice predictor</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous" />
</head>

<body>
    <header class="bg-dark text-light p-3 shadow-lg">
        <h1 class="text-center">
            Classification of Rice Varieties Using Artificial Intelligence Methods.
        </h1>
    </header>


    <div class="container-fluid" style="min-height: 80vh">
        <div class="row">
            <div class="col-12">
                <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                        <a class="nav-item nav-link w-50  text-center" id="nav-profile-tab" data-toggle="tab" href="#nav-form" role="tab" aria-controls="nav-profile" aria-selected="false">Form</a>
                        <a class="nav-item nav-link w-50  text-center" id="nav-contact-tab" data-toggle="tab" href="#nav-csv" role="tab" aria-controls="nav-contact" aria-selected="false">.CSV</a>
                    </div>
                </nav>
                <div class="tab-content" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-form" role="tabpanel">
                        <div class="container">
                            <div class="row">
                                <div class="col-7 mx-auto">
                                    <!--  -->
                                    <h1 class="text-center text-info">Enter infomation</h1>
                                    <form class="shadow-lg p-5" action="predict" method="POST" id="frm" novalidate>
                                        {% csrf_token %}
                                        <div class="form-group">
                                            <label for="txtArea">Area:</label>
                                            <input type="text" class="form-control" id="txtArea" aria-describedby="emailHelp" name="txtArea">
                                            <small id="arenaHelp" class="form-text text-muted">Returns the number of pixels within the
                                            boundaries of
                                            the rice grain.</small>
                                        </div>
                                        <div class="form-group">
                                            <label for="txtPerimeter">Perimeter:</label>
                                            <input type="text" class="form-control" id="txtPerimeter" name="txtPerimeter">
                                            <small id="arenaHelp" class="form-text text-muted">Calculates the circumference by calculating
                                            the
                                            distance between pixels around the boundaries of the rice grain.</small>
                                        </div>
                                        <div class="form-group">
                                            <label for="txtMajorAxisLength">Major Axis Length:</label>
                                            <input type="text" class="form-control" id="txtMajorAxisLength" name="txtMajorAxisLength">
                                            <small id="arenaHelp" class="form-text text-muted">The longest line that can be drawn on the
                                            rice grain,
                                            i.e. the main axis distance, gives.</small>
                                        </div>
                                        <div class="form-group">
                                            <label for="txtMinorAxisLength">Minor Axis Length:</label>
                                            <input type="text" class="form-control" id="txtMinorAxisLength" name="txtMinorAxisLength">
                                            <small id="arenaHelp" class="form-text text-muted">The shortest line that can be drawn on the
                                            rice
                                            grain, i.e. the small axis distance, gives.</small>
                                        </div>
                                        <div class="form-group">
                                            <label for="txtEccentricity">Eccentricity:</label>
                                            <input type="text" class="form-control" id="txtEccentricity" name="txtEccentricity">
                                            <small id="arenaHelp" class="form-text text-muted">It measures how round the ellipse, which has
                                            the same
                                            moments as the rice grain, is.</small>
                                        </div>
                                        <div class="form-group">
                                            <label for="txtConvexArea">Convex Area:</label>
                                            <input type="text" class="form-control" id="txtConvexArea" name="txtConvexArea">
                                            <small id="arenaHelp" class="form-text text-muted">Returns the pixel count of the smallest
                                            convex shell
                                            of the region formed by the rice grain.</small>
                                        </div>
                                        <div class="form-group">
                                            <label for="txtExtent">Extent:</label>
                                            <input type="text" class="form-control" id="txtExtent" name="txtExtent">
                                            <small id="arenaHelp" class="form-text text-muted">Returns the ratio of the regionformed by the
                                            rice
                                            grain to the bounding box pixels.</small>
                                        </div>
                                        {% comment %} DT , bayes, SVM {% endcomment %}
                                        <button class="btn btn-primary form-control">Predict</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="nav-csv" role="tabpanel">
                        <div class="container">
                            <div class="row">
                                <div class="col-7 mx-auto">
                                    <h1 class="text-center text-info">Predict from .csv file</h1>
                                    <form action="predict_csv" method="POST" name="frmPredictCSV" class="shadow-lg p-5" enctype="multipart/form-data">
                                        {% csrf_token %}
                                        <div class="custom-file mb-3">
                                            <label for="fXTest" class="custom-file-label">File csv</label>
                                            <input type="file" class="custom-file-input" name="fXTest" />
                                        </div>
                                        <button class="btn btn-primary form-control btn-predict">Predict</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-light p-3 text-center">Power by Bootstrap4, JQuery, Django</footer>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        $(function() {
            $('#frm').submit(function(event) {
                let isSubmit = true;
                $.each($('#frm input'), function() {
                    if ($(this).attr('name') === 'csrfmiddlewaretoken') return;

                    if (isNaN(parseFloat($(this).val())) || `${$(this).val()}`.length != `${parseFloat($(this).val())}`.length) {
                        $(this).removeClass('is-valid').addClass('is-invalid');
                        isSubmit = false;
                    } else {
                        $(this).removeClass('is-invalid').addClass('is-valid');
                    }
                });
                if (!isSubmit) event.preventDefault();
                return isSubmit;
            });

            $('.btn-predict').click(function() {
                $('.btn-download').removeClass('disabled');
            });

            $('form[name="frmPredictCSV"]').submit(function(event) {
                let fileField = $('input[name="fXTest"]');
                if (fileField.val().length === 0) {
                    event.preventDefault();
                    fileField.removeClass('is-valid').addClass('is-invalid');
                } else
                    fileField.removeClass('is-invalid').addClass('is-valid');
            });

            $('input[name="fXTest"]').change(function() {
                let sep = "/";
                if ($(this).val().includes('\\')) sep = '\\';
                $(this).siblings('label').html($(this).val().split(sep).slice(-1));
            });
        });
    </script>

</body>

</html>